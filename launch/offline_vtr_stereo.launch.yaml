## Offline Stereo Camera VTR3 (using datasets)

session_name: offline_vtr_stereo

# environment:
#   ROS_DOMAIN_ID: "1"  # set this to a unique number when multiple ROS2 processes running on the same network

shell_command_before:
  - "source ${VTRSRC}/main/install/setup.bash"

start_directory: ${VTRTEMP}

suppress_history: false

windows:
  - window_name: vtr_main
    layout: main-horizontal
    panes:
      # - ros2 launch vtr_navigation vtr_stereo.launch.py scenario_params:=offline.yaml data_dir:=${VTRDATA}/experiments/2021-08-02/lighting-change clear_data_dir:=false use_sim_time:=true
      # - ros2 launch vtr_navigation vtr_stereo.launch.py scenario_params:=offline.yaml data_dir:=${VTRDATA}/experiments-surf/2021-08-14/lighting-change-extended-surf clear_data_dir:=false use_sim_time:=true
      - ros2 launch vtr_navigation vtr_stereo.launch.py scenario_params:=offline.yaml data_dir:=${VTRDATA}/experiments-superpoint/2021-08-14/lighting-change-extended-superpoint clear_data_dir:=false use_sim_time:=true

      # - ros2 run vtr_mission_planning vtr_mission.py --help # backup way to send commands if UI not working

      # - ros2 run rviz2 rviz2 -d ~/.rviz2/stereo.rviz
      - echo "backup terminal"

      - ros2 run vtr_sensors BumblebeeReplay ${VTRDATA}/experiments/2021-08-14/lighting-change-extended-layer16/front-xb3/run_000000 front_xb3 false 0 999000 1 0

  - window_name: vtr_ui
    layout: main-horizontal
    panes:
      - sleep 2 && ros2 run vtr_ui socket_client  --ros-args -r __ns:=/vtr # wait for the socket_server to be created
      - ros2 run vtr_ui web_server  --ros-args -r __ns:=/vtr
      - ros2 run vtr_ui socket_server  --ros-args -r __ns:=/vtr
      - sleep 5 && firefox --new-window "localhost:5200" # the webpage has to wait for everything above

  - window_name: grizzly
    layout: main-horizontal
    panes:
      - ros2 launch vtr_grizzly grizzly_utias_description.launch.py

  - window_name: camera
    layout: main-horizontal
    panes:
      - ros2 run vtr_sensors BumblebeeCalibration ${VTRDATA}/experiments/2021-08-14/lighting-change-extended-layer16/front-xb3/run_000000 front_xb3
